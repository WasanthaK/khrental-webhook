Database Test Log - 2025-04-14T09:16:06.625Z

Starting database test
=== Testing Database Connection ===
Connection result:
{
  "success": true,
  "count": 3
}

=== Testing Webhook Events Table ===
Querying webhook_events table...
Found 3 webhook events
First event:
{
  "id": "019049b3-d97c-4ad8-875c-730d933003dc",
  "event_type": "SignatoryCompleted",
  "request_id": "0493e1ee-4cfe-431b-9d89-6d3a107d3af1",
  "user_name": "Kumara",
  "user_email": "weerakoonewk@gmail.com",
  "subject": "Rental Agreement - Property",
  "event_id": 2,
  "event_time": "2023-05-01T12:00:00+00:00",
  "raw_data": "{\"RequestId\":\"0493e1ee-4cfe-431b-9d89-6d3a107d3af1\",\"UserName\":\"Kumara\",\"Email\":\"weerakoonewk@gmail.com\",\"Subject\":\"Rental Agreement - Property\",\"EventId\":2,\"EventDescription\":\"SignatoryCompleted\",\"EventTime\":\"2023-05-01T12:00:00Z\",\"receivedAt\":\"2025-04-14T08:22:22.865Z\"}",
  "createdat": "2025-04-14T08:22:22.867+00:00",
  "updatedat": "2025-04-14T08:22:22.867+00:00",
  "processed": false,
  "processed_at": null
}

=== Testing Webhook Event Insertion ===
Inserting test webhook event...
Test event data:
{
  "EventId": 1,
  "EventDescription": "SignRequestReceived",
  "RequestId": "test-1744622167663",
  "Email": "test@example.com",
  "UserName": "Test User",
  "Subject": "Test Document",
  "EventTime": "2025-04-14T09:16:07.663Z"
}
Insert result:
{
  "success": true,
  "data": {
    "id": "d4770044-250c-4d61-b1d0-c49959eb7603",
    "event_type": "SignRequestReceived",
    "request_id": "22791182-ecc8-4cf3-8f02-1a49700bca4d",
    "user_name": "Test User",
    "user_email": "test@example.com",
    "subject": "Test Document",
    "event_id": 1,
    "event_time": "2025-04-14T09:16:07.663+00:00",
    "raw_data": "{\"EventId\":1,\"EventDescription\":\"SignRequestReceived\",\"RequestId\":\"test-1744622167663\",\"Email\":\"test@example.com\",\"UserName\":\"Test User\",\"Subject\":\"Test Document\",\"EventTime\":\"2025-04-14T09:16:07.663Z\"}",
    "createdat": "2025-04-14T09:16:07.664+00:00",
    "updatedat": "2025-04-14T09:16:07.664+00:00",
    "processed": false,
    "processed_at": null
  }
}

=== Verifying Event Storage ===
Error verifying event storage:
{
  "code": "22P02",
  "details": null,
  "hint": null,
  "message": "invalid input syntax for type uuid: \"test-1744622167663\""
}
Test completed
Results written to ./db-test-log.txt
